<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarama Sonuçları - {{ target }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Inter font for consistency with index.html */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styling for details/summary to match the dark theme */
        details summary::-webkit-details-marker {
            display: none; /* Hide default marker in Chrome/Safari */
        }
        details summary {
            list-style: none; /* Hide default marker in Firefox */
        }
        details summary::before {
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            content: "\f0da"; /* Font Awesome right arrow */
            margin-right: 0.5rem;
            transition: transform 0.2s ease-in-out;
            display: inline-block;
        }
        details[open] summary::before {
            transform: rotate(90deg);
        }
        /* Custom scrollbar for pre elements in dark theme */
        pre::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        pre::-webkit-scrollbar-track {
            background: #2d3748; /* gray-800 */
        }
        pre::-webkit-scrollbar-thumb {
            background: #4a5568; /* gray-600 */
            border-radius: 4px;
        }
        pre::-webkit-scrollbar-thumb:hover {
            background: #718096; /* gray-500 */
        }
        /* Ensuring table links are visible in dark theme */
        .ffuf-results-table a {
            color: #90cdf4; /* blue-400 or similar light blue */
            text-decoration: underline;
        }
        .ffuf-results-table a:hover {
            color: #63b3ed; /* blue-300 */
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen p-4 md:p-8">
    <div class="bg-gray-800 p-6 md:p-10 rounded-xl shadow-2xl w-full max-w-4xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-500 to-red-500">
                <i class="fas fa-poll-h mr-2"></i>Tarama Sonuçları
            </h1>
            <p class="text-gray-400 mt-2 text-lg">
                Hedef: <a href="{{ target }}" target="_blank" rel="noopener noreferrer" class="text-purple-400 hover:text-purple-300 underline">{{ target }}</a>
            </p>
        </header>

        <div class="result-section bg-gray-700/50 p-6 rounded-lg shadow-lg mb-8">
            <h2 class="text-2xl font-semibold text-gray-200 mb-4 border-b border-gray-600 pb-2">
                <i class="fab fa-searchengin mr-2 text-purple-400"></i>Sublist3r Sonuçları
            </h2>
            <h3 class="text-lg font-medium text-gray-300 mb-2">Standart Çıktı (stdout):</h3>
            <pre class="bg-gray-800 p-4 rounded-md overflow-x-auto text-sm max-h-96">{{ sublist3r_stdout if sublist3r_stdout.strip() else "Veri yok." }}</pre>
            
            <details class="mt-4 bg-gray-700 rounded-md">
                <summary class="cursor-pointer p-3 font-medium text-gray-300 hover:bg-gray-600/70 rounded-t-md">
                    Hata Çıktısı (stderr):
                </summary>
                <div class="p-3 border-t border-gray-600">
                    <pre class="bg-gray-800 p-4 rounded-md overflow-x-auto text-sm max-h-60">{{ sublist3r_stderr if sublist3r_stderr.strip() else "Hata çıktısı yok." }}</pre>
                </div>
            </details>
        </div>

        <div class="result-section bg-gray-700/50 p-6 rounded-lg shadow-lg mb-8">
            <h2 class="text-2xl font-semibold text-gray-200 mb-4 border-b border-gray-600 pb-2">
                <i class="fas fa-code-branch mr-2 text-pink-500"></i>SubDomainizer Sonuçları
            </h2>
            <h3 class="text-lg font-medium text-gray-300 mb-2">Bulunan Alt Alan Adları ve URL'ler:</h3>
            <pre class="bg-gray-800 p-4 rounded-md overflow-x-auto text-sm max-h-96">{{ subdomainizer_stdout if subdomainizer_stdout.strip() else "Veri yok." }}</pre>

            <details class="mt-4 bg-gray-700 rounded-md">
                <summary class="cursor-pointer p-3 font-medium text-gray-300 hover:bg-gray-600/70 rounded-t-md">
                    Hata Çıktısı (stderr):
                </summary>
                <div class="p-3 border-t border-gray-600">
                    <pre class="bg-gray-800 p-4 rounded-md overflow-x-auto text-sm max-h-60">{{ subdomainizer_stderr if subdomainizer_stderr.strip() else "Hata çıktısı yok." }}</pre>
                </div>
            </details>
        </div>

        <div class="result-section bg-gray-700/50 p-6 rounded-lg shadow-lg mb-8">
            <h2 class="text-2xl font-semibold text-gray-200 mb-4 border-b border-gray-600 pb-2">
                <i class="fas fa-folder-open mr-2 text-red-500"></i>FFUF Sonuçları
            </h2>
            {% if ffuf_json_parsed is not none and ffuf_json_parsed %}
                <h3 class="text-lg font-medium text-gray-300 mb-3">Bulunan Yollar:</h3>
                <div class="overflow-x-auto rounded-md shadow">
                    <table class="ffuf-results-table w-full text-sm text-left text-gray-300 bg-gray-800">
                        <thead class="text-xs text-gray-200 uppercase bg-gray-700">
                            <tr>
                                <th scope="col" class="px-6 py-3">URL</th>
                                <th scope="col" class="px-6 py-3">Durum</th>
                                <th scope="col" class="px-6 py-3">Uzunluk</th>
                                <th scope="col" class="px-6 py-3">Kelimeler</th>
                                <th scope="col" class="px-6 py-3">Satırlar</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for result in ffuf_json_parsed %}
                            <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700/70">
                                <td class="px-6 py-4 font-medium whitespace-nowrap">
                                    <a href="{{ result.url }}" target="_blank" rel="noopener noreferrer">{{ result.url }}</a>
                                </td>
                                <td class="px-6 py-4">{{ result.status }}</td>
                                <td class="px-6 py-4">{{ result.length }}</td>
                                <td class="px-6 py-4">{{ result.words }}</td>
                                <td class="px-6 py-4">{{ result.lines }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% elif ffuf_json_parsed is none %}
                 <h3 class="text-lg font-medium text-gray-300 mb-2">JSON Çıktısı (Ham Veri):</h3>
                <p class="text-sm text-yellow-400 mb-2"><i class="fas fa-exclamation-triangle mr-1"></i>JSON verisi işlenirken bir sorun oluştu veya dosya bulunamadı. Ham veri aşağıdadır:</p>
                <pre class="bg-gray-800 p-4 rounded-md overflow-x-auto text-sm max-h-96">{{ ffuf_json_raw if ffuf_json_raw.strip() else "FFUF JSON çıktısı yok veya işlenemedi." }}</pre>
            {% else %}
                <p class="text-gray-400 my-4"><i class="fas fa-info-circle mr-1 text-blue-400"></i>FFUF ile herhangi bir yol bulunamadı veya filtrelere uyan sonuç yok.</p>
                <h3 class="text-lg font-medium text-gray-300 mb-2">JSON Çıktısı (Ham Veri):</h3>
                <pre class="bg-gray-800 p-4 rounded-md overflow-x-auto text-sm max-h-96">{{ ffuf_json_raw if ffuf_json_raw.strip() else "FFUF JSON çıktısı boş." }}</pre>
            {% endif %}

            <details class="mt-6 bg-gray-700 rounded-md">
                <summary class="cursor-pointer p-3 font-medium text-gray-300 hover:bg-gray-600/70 rounded-t-md">
                    Konsol Hata Çıktısı (stderr):
                </summary>
                <div class="p-3 border-t border-gray-600">
                     <pre class="bg-gray-800 p-4 rounded-md overflow-x-auto text-sm max-h-60">{{ ffuf_stderr if ffuf_stderr.strip() else "FFUF için konsol hata çıktısı yok." }}</pre>
                </div>
            </details>
        </div>

        <div class="mt-10 text-center">
            <a href="{{ url_for('index') }}"
               class="inline-block bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold py-3 px-8 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                <i class="fas fa-arrow-left mr-2"></i>Yeni Tarama Başlat
            </a>
        </div>
    </div>

    <footer class="text-center text-gray-500 mt-10 pb-4">
        <p>&copy; 2025 Xnes. Tüm hakları saklıdır.</p>
    </footer>
</body>
</html>
